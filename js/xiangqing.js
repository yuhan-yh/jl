"use strict";function _classCallCheck(s,t){if(!(s instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(s,i.key,i)}}function _createClass(s,t,n){return t&&_defineProperties(s.prototype,t),n&&_defineProperties(s,n),s}var id=location.search.split("=")[1],usename=sessionStorage.getItem("usename");function display(){function n(s){$(".ui_quantity_num").val(s),$("#infoProduct").html($("#goodName").html()),$("#infoProductNum").html(s),$("#infoProductTotal").html(s*parseInt($("#JgoodsPrice").html()))}$(".vi_tab_options li").click(function(){$(this).addClass("curr").siblings().removeClass("curr"),$(".vi_tab_con .vi_tab_item").eq($(this).index()).css({display:"block"}).siblings().css({display:"none"})}),$("#ui_quantity_redu").unbind(),$("#ui_quantity_redu").click(function(s){var t=parseInt($(".ui_quantity_num").val());0<t?n(--t):$(".ui_quantity_num").val(0),s.stopPropagation()}),$("#ui_quantity_add").unbind(),$("#ui_quantity_add").click(function(s){var t=parseInt($(".ui_quantity_num").val());0<t||0==t?n(++t):$(".ui_quantity_num").val(0),s.stopPropagation()}),$(".ui_quantity_num").on("input",function(s){var t=parseInt($(".ui_quantity_num").val());n(0<t||0==t?t:0),s.stopPropagation()}),$(".item li").click(function(){$(this).addClass("curr").siblings().removeClass("curr"),$(".vi_imgs_big img").eq($(this).index()).css({display:"block"}).siblings().css({display:"none"}),$(".fdj img").eq($(this).index()).css({display:"block"}).siblings().css({display:"none"}),$(".zzc").css({display:"block"}),$(".vi_imgs_big p").css({display:"block"});var s=$(".vi_imgs_big"),t=$(".vi_imgs_big img").eq($(this).index()),n=$(".zzc"),i=$(".fdj"),a=$(".fdj img").eq($(this).index());new o(s[0],t[0],n[0],i[0],a[0]).addEvent()}),$(".btn_addCart_dis").unbind(),$(".btn_addCart_dis").click(function(){$.ajax({type:"POST",url:"../php/addgoods.php",data:{m1:usename,m2:id,m3:$("#JgoodsPrice").html(),m4:$("#iptQuantityQum").val()},dataType:"json",success:function(){alert("成功加入购物车")}})});var o=function(){function o(s,t,n,i,a){_classCallCheck(this,o),this.zuo_box=s,this.zuo_img=t,this.zuo_span=n,this.you_box=i,this.you_img=a}return _createClass(o,[{key:"addEvent",value:function(){var t=this;this.zuo_box.onmouseover=function(){t.over()},this.zuo_box.onmousemove=function(s){s=s||window.Event;t.move(s)},this.zuo_box.onmouseout=function(){t.out()}}},{key:"over",value:function(){this.zuo_span.style.display="block",this.you_box.style.display="block"}},{key:"move",value:function(s){var t=s.offsetX-this.zuo_box.offsetLeft-this.zuo_span.offsetWidth/2,n=s.offsetY-this.zuo_box.offsetTop-this.zuo_span.offsetHeight/2;t<0&&(t=0),n<0&&(n=0),t>this.zuo_box.offsetWidth-this.zuo_span.offsetWidth&&(t=this.zuo_box.offsetWidth-this.zuo_span.offsetWidth),n>this.zuo_box.offsetHeight-this.zuo_span.offsetHeight&&(n=this.zuo_box.offsetHeight-this.zuo_span.offsetHeight),this.zuo_span.style.left=t+"px",this.zuo_span.style.top=n+"px";var i=t/(this.zuo_box.offsetWidth-this.zuo_span.offsetWidth),a=n/(this.zuo_box.offsetHeight-this.zuo_span.offsetHeight);this.you_img.style.left=i*(this.you_box.offsetWidth-this.you_img.offsetWidth)+"px",this.you_img.style.top=a*(this.you_box.offsetHeight-this.you_img.offsetHeight)+"px"}},{key:"out",value:function(){this.zuo_span.style.display="none",this.you_box.style.display="none"}}]),o}();$(".item li").eq(0).click()}$.ajax({type:"GET",dataType:"json",url:"../php/xiangqing.php",success:function(s){for(var t,n,i,a,o,e,l=0;l<s.length;l++){s[l].goodsId==id&&(t="",t+='\n                <img src="'.concat(s[l].img.largeImg[0],'" >\n                <img src="').concat(s[l].img.largeImg[1],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[2],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[3],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[4],'" alt="" style="display: none;">\n                <span class="zzc"></span>\n                <p></p>'),$(".vi_imgs_big").html(t),n="",n+='\n                <img src="'.concat(s[l].img.largeImg[0],'" alt="金立TC-G300快速充电器">\n                <img src="').concat(s[l].img.largeImg[1],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[2],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[3],'" alt="" style="display: none;">\n                <img src="').concat(s[l].img.largeImg[4],'" alt="" style="display: none;">'),$(".fdj").html(n),i="",i+='\n                    <ul class="item">\n                        <li class="curr"><img src="'.concat(s[l].img.smallImg[0],'" alt=""></li>\n                        <li><img src="').concat(s[l].img.smallImg[1],'" alt=""></li>\n                        <li><img src="').concat(s[l].img.smallImg[2],'" alt=""></li>\n                        <li><img src="').concat(s[l].img.smallImg[3],'" alt=""></li>\n                        <li><img src="').concat(s[l].img.smallImg[4],'" alt=""></li>\n                    </ul>'),$(".panel").html(i),a="",a+='\n                <h1 class="name" id="goodName">'.concat(s[l].name,'</h1>\n                <p class="slogan">').concat(s[l].msg,'</p>\n                <div class="w3_goods_infos">\n                    <div class="price">\n                        <span class="ue_jstfy">现价</span>\n                        <em class="z w3_mr">：</em>\n                        <span class="price_sale">\n                            <em>￥</em>\n                            <span id="JgoodsPrice">').concat(s[l].price,'</span>\n                        </span>\n                    </div>\n                </div>\n                <dl class="vi_attribute">\n                    <dt class="lbl">\n                        <span class="ue_jstfy">颜色</span>\n                        <em class="z">：</em>\n                    </dt>\n                    <dd class="cont">\n                        <span class="vi_color curr">\n                            <img src="').concat(s[l].img.smallImg[0],'" alt="').concat(s[l].msg,'">\n                            <b class="sel"></b>\n                        </span>\n                    </dd>\n                </dl>\n                <dl class="vi_quantity">\n                    <dt class="lbl jstfy">\n                        <span class="ue_jstfy">购买数量</span>\n                        <em class="z">：</em>\n                    </dt>\n                    <dd class="cont">\n                        <div class="ui_quantity" id="Jquantity">\n                            <div class="ui_quantity_redu ui_quantity_redu_dis" id="ui_quantity_redu"></div>\n                            <input type="text" class="ui_quantity_num" id="iptQuantityQum" value="1" >\n                            <div class="ui_quantity_add" id="ui_quantity_add"></div>\n                        </div>\n                    </dd>\n                </dl>'),$(".vi_sumary").html(a),o="",o+='\n                <p class="book_infos">\n                    <span class="lbl">您已选择：</span>\n                    <span id="infoProduct">'.concat(s[l].name,'</span>\n                    <span id="infoProductNum">1</span>\n                    件 总计: ￥<span id="infoProductTotal">').concat(s[l].price,'</span>\n                    元\n                </p>\n                <div class="op">\n                    <a class="btn_addCart btn_addCart_dis" id="JbtnAddCart">加入购物车</a>\n                    <div class="bdsharebuttonbox bdshare-button-style0-16">\n                        <span>分享到：</span>\n                        <a href="" class="bds_qzone style0-16" title="分享到QQ空间"></a>\n                        <a href="" class="bds_tsina style0-16" title="分享到新浪微博"></a>\n                        <a href="" class="bds_tqq style0-16" title="分享到腾讯微博"></a>\n                        <a href="" class="bds_more style0-16" ></a>\n                    </div>\n                </div>'),$(".buy_area").html(o),e="",e+='\n                <p>\n                <img src="'.concat(s[l].gnts[0],'" alt="">\n                <img src="').concat(s[l].gnts[1],'" alt="">\n                <img src="').concat(s[l].gnts[2],'" alt="">\n                <img src="').concat(s[l].gnts[3],'" alt="">\n                <img src="').concat(s[l].gnts[4],'" alt="">\n                <img src="').concat(s[l].gnts[5],'" alt="">\n            </p>'),$(".vi_tab_info").html(e)),display()}}});